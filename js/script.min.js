const servicesControl=document.querySelector(".services-control"),promoControl=document.querySelector(".promo-control"),modalMapOpen=document.querySelector(".map-link"),modalMap=document.querySelector(".modal-map"),modalFeedback=document.querySelector(".modal-feedback"),modalFeedbackOpen=document.querySelector(".feedback-link"),clientNameField=modalFeedback.querySelector(".client-name"),clientEmailField=modalFeedback.querySelector(".client-email"),clientMessageField=modalFeedback.querySelector(".client-message"),feedbackForm=document.querySelector(".feedback-form"),feedbackFormFields=feedbackForm.querySelectorAll(".form-field");let isStorageSupport=!0,clientName="",clientEmail="";try{clientName=localStorage.getItem("clientName"),clientEmail=localStorage.getItem("clientEmail")}catch(e){isStorageSupport=!1}function changeSlide(e){var t=e.target;if(t.classList.contains("slide-btn")){var l=getSliderControls(t);const o=getSlides(t);e=[].indexOf.call(l,t);clearBtns(l),markCurrentBtn(t),o.forEach(function(e){e.classList.remove("slide-current")}),o[e].classList.add("slide-current")}}function clearBtns(e){e.forEach(function(e){e.classList.remove("current-btn")})}function markCurrentBtn(e){e.classList.add("current-btn")}function getSliderControls(e){const t=e.closest('[class*="control"]');return t.querySelectorAll(".slide-btn")}function getSlides(e){const t=e.closest('[class*="slider"]');return t.querySelectorAll(".slide")}function showModal(e,t){e.preventDefault(),t.classList.remove("modal-hide"),t.addEventListener("click",function(){closeModal(t)}),window.addEventListener("keydown",function(){closeModal(t)}),t.classList.contains("modal-feedback")&&fillForm()}function closeModal(e){const t=event.target;!t.classList.contains("modal-close")&&27!=event.keyCode||(event.preventDefault(),e.classList.add("modal-hide"),e.classList.contains("modal-feedback")&&removeFormError(),e.removeEventListener("click",closeModal))}function fillForm(){clientNameField.focus(),clientName&&(clientNameField.value=clientName,clientEmailField.focus()),clientEmail&&(clientEmailField.value=clientEmail,clientMessageField.focus())}function checkForm(t){feedbackForm.classList.remove("error-form"),feedbackForm.offsetWidth=feedbackForm.offsetWidth,feedbackFormFields.forEach(function(e){e.value?isStorageSupport&&(localStorage.setItem("clientName",clientNameField.value),localStorage.setItem("clientEmail",clientEmailField.value)):(t.preventDefault(),e.classList.add("error-field"),e.addEventListener("keydown",function(){this.classList.remove("error-field")}),feedbackForm.classList.add("error-form"))})}function removeFormError(){feedbackForm.classList.contains("error-form")&&(feedbackForm.classList.remove("error-form"),feedbackFormFields.forEach(function(e){e.classList.contains("error-field")&&e.classList.remove("error-field")}))}servicesControl.addEventListener("click",changeSlide),promoControl.addEventListener("click",changeSlide),modalMapOpen.addEventListener("click",function(){showModal(event,modalMap)},!1),modalFeedbackOpen.addEventListener("click",function(){showModal(event,modalFeedback)},!1),feedbackForm.addEventListener("submit",checkForm);
